<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugin-html-slider-response.js"></script> 
    <script src="https://proliferate.alps.science/static/js/proliferate.js" type="text/javascript"></script>
    <link href="jspsych/jspsych.css" rel="stylesheet" type="text/css" />
  </head>
  <body>

    <script>
      const jsPsych = initJsPsych();

      const slider_trial = {
        type: jsPsychHtmlSliderResponse,
        stimulus: 'Please indicate your preference:',
        labels: ['Strongly prefer A', 'Neutral', 'Strongly prefer B'],
        min: -1,
        max: 1,
        start: 0,
        step: 0.01,
        slider_width: 400
      };

      jsPsych.run([slider_trial]).then(() => {
        // Experiment is finished, now show the submit button
        const submitButtonHTML = '<button id="submit-btn" onclick="submitToProliferate()">Submit</button>';
        document.body.insertAdjacentHTML('beforeend', submitButtonHTML);
      });

      function submitToProliferate() {
        const surveyData = {
          responses: jsPsych.data.get().json() // Collect all the response data
        };
        // Implement the submission logic to Proliferate
        proliferate.submit(surveyData);

        // Display a thank you message
        document.body.innerHTML = '<p>Thank you for completing the survey!</p>';
      }
    </script>

  </body>
</html>

